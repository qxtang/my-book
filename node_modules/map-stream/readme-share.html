<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Book - readme</title>

  <link rel="stylesheet" href="/my-book/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/my-book/resource/style.css" />
  <link rel="stylesheet" href="/my-book/resource/lib/highlight/default.min.css" />
  <script src="/my-book/resource/lib/highlight/highlight.min.js"></script>
  <script src="/my-book/resource/lib/jquery.min.js"></script>
  <script src="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script src="//unpkg.com/jquery-viewer@1.0.1/dist/jquery-viewer.min.js"></script>
  <link rel="stylesheet" href="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.css" />

  <link rel="manifest" href="/my-book/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/my-book/resource/favicon.ico" />

  <!-- 编译时间：3/27/2022, 3:51:00 PM -->

  <script>
    window.root = '/my-book';
    hljs.highlightAll();
  </script>

  <script src="/my-book/resource/script.js"></script>
</head>

  <body>
    <div class="content markdown-body"><h1>MapStream</h1>
<p>Refactored out of <a href="https://github.com/dominictarr/event-stream">event-stream</a></p>
<p>##map (asyncFunction[, options])</p>
<p>Create a through stream from an asyncronous function.</p>
<pre><code class="language-js">var map = require('map-stream')

map(function (data, callback) {
  //transform data
  // ...
  callback(null, data)
})

</code></pre>
<p>Each map MUST call the callback. It may callback with data, with an error or with no arguments,</p>
<ul>
<li>
<p><code>callback()</code> drop this data.<br>
this makes the map work like <code>filter</code>,<br>
note:<code>callback(null,null)</code> is not the same, and will emit <code>null</code></p>
</li>
<li>
<p><code>callback(null, newData)</code> turn data into newData</p>
</li>
<li>
<p><code>callback(error)</code> emit an error for this item.</p>
</li>
</ul>
<blockquote>
<p>Note: if a callback is not called, <code>map</code> will think that it is still being processed,<br>
every call must be answered or the stream will not know when to end.</p>
<p>Also, if the callback is called more than once, every call but the first will be ignored.</p>
</blockquote>
<p>##Options</p>
<ul>
<li><code>failures</code> - <code>boolean</code> continue mapping even if error occured. On error <code>map-stream</code> will emit <code>failure</code> event. (default: <code>false</code>)</li>
</ul>
</div>
  </body>
</html>
