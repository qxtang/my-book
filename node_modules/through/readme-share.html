<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Book - readme</title>

  <link rel="stylesheet" href="/my-book/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/my-book/resource/style.css" />
  <link rel="stylesheet" href="/my-book/resource/lib/highlight/default.min.css" />
  <script src="/my-book/resource/lib/highlight/highlight.min.js"></script>
  <script src="/my-book/resource/lib/jquery.min.js"></script>
  <script src="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script src="//unpkg.com/jquery-viewer@1.0.1/dist/jquery-viewer.min.js"></script>
  <link rel="stylesheet" href="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.css" />

  <link rel="manifest" href="/my-book/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/my-book/resource/favicon.ico" />

  <!-- 编译时间：3/27/2022, 3:51:00 PM -->

  <script>
    window.root = '/my-book';
    hljs.highlightAll();
  </script>

  <script src="/my-book/resource/script.js"></script>
</head>

  <body>
    <div class="content markdown-body"><p>#through</p>
<p><a href="http://travis-ci.org/dominictarr/through"><img src="https://secure.travis-ci.org/dominictarr/through.png" alt="build status"></a>
<a href="https://ci.testling.com/dominictarr/through"><img src="https://ci.testling.com/dominictarr/through.png" alt="testling badge"></a></p>
<p>Easy way to create a <code>Stream</code> that is both <code>readable</code> and <code>writable</code>.</p>
<ul>
<li>Pass in optional <code>write</code> and <code>end</code> methods.</li>
<li><code>through</code> takes care of pause/resume logic if you use <code>this.queue(data)</code> instead of <code>this.emit('data', data)</code>.</li>
<li>Use <code>this.pause()</code> and <code>this.resume()</code> to manage flow.</li>
<li>Check <code>this.paused</code> to see current flow state. (<code>write</code> always returns <code>!this.paused</code>).</li>
</ul>
<p>This function is the basis for most of the synchronous streams in
<a href="http://github.com/dominictarr/event-stream">event-stream</a>.</p>
<pre><code class="language-js">var through = require('through')

through(function write(data) {
    this.queue(data) //data *must* not be null
  },
  function end () { //optional
    this.queue(null)
  })
</code></pre>
<p>Or, can also be used <em>without</em> buffering on pause, use <code>this.emit('data', data)</code>,
and this.emit('end')</p>
<pre><code class="language-js">var through = require('through')

through(function write(data) {
    this.emit('data', data)
    //this.pause() 
  },
  function end () { //optional
    this.emit('end')
  })
</code></pre>
<h2>Extended Options</h2>
<p>You will probably not need these 99% of the time.</p>
<h3>autoDestroy=false</h3>
<p>By default, <code>through</code> emits close when the writable
and readable side of the stream has ended.
If that is not desired, set <code>autoDestroy=false</code>.</p>
<pre><code class="language-js">var through = require('through')

//like this
var ts = through(write, end, {autoDestroy: false})
//or like this
var ts = through(write, end)
ts.autoDestroy = false
</code></pre>
<h2>License</h2>
<p>MIT / Apache2</p>
</div>
  </body>
</html>
