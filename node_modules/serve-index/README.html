<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Book - README</title>

  <link rel="stylesheet" href="/my-book/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/my-book/resource/style.css" />
  <link rel="stylesheet" href="/my-book/resource/lib/highlight/default.min.css" />
  <script src="/my-book/resource/lib/highlight/highlight.min.js"></script>
  <script src="/my-book/resource/lib/jquery.min.js"></script>
  <script src="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script src="//unpkg.com/jquery-viewer@1.0.1/dist/jquery-viewer.min.js"></script>
  <link rel="stylesheet" href="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.css" />

  <link rel="manifest" href="/my-book/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/my-book/resource/favicon.ico" />

  <!-- 编译时间：3/27/2022, 3:51:00 PM -->

  <script>
    window.root = '/my-book';
    hljs.highlightAll();
  </script>

  <script src="/my-book/resource/script.js"></script>
</head>

  <body>
    <div class="menu" id="menu"></div>
    <div class="mobile_menu" id="mobile_menu">
      <img src="https://cdn.jsdelivr.net/gh/FortAwesome/font-awesome/svgs/solid/bars.svg" alt="" />
    </div>
    <div class="content markdown-body"><h1>serve-index</h1>
<p><a href="https://npmjs.org/package/serve-index"><img src="https://img.shields.io/npm/v/serve-index.svg" alt="NPM Version"></a>
<a href="https://npmjs.org/package/serve-index"><img src="https://img.shields.io/npm/dm/serve-index.svg" alt="NPM Downloads"></a>
<a href="https://travis-ci.org/expressjs/serve-index"><img src="https://img.shields.io/travis/expressjs/serve-index/master.svg?label=linux" alt="Linux Build"></a>
<a href="https://ci.appveyor.com/project/dougwilson/serve-index"><img src="https://img.shields.io/appveyor/ci/dougwilson/serve-index/master.svg?label=windows" alt="Windows Build"></a>
<a href="https://coveralls.io/r/expressjs/serve-index?branch=master"><img src="https://img.shields.io/coveralls/expressjs/serve-index/master.svg" alt="Test Coverage"></a>
<a href="https://www.gratipay.com/dougwilson/"><img src="https://img.shields.io/gratipay/dougwilson.svg" alt="Gratipay"></a></p>
<p>Serves pages that contain directory listings for a given path.</p>
<h2>Install</h2>
<p>This is a <a href="https://nodejs.org/en/">Node.js</a> module available through the
<a href="https://www.npmjs.com/">npm registry</a>. Installation is done using the
<a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"><code>npm install</code> command</a>:</p>
<pre><code class="language-sh">$ npm install serve-index
</code></pre>
<h2>API</h2>
<pre><code class="language-js">var serveIndex = require('serve-index')
</code></pre>
<h3>serveIndex(path, options)</h3>
<p>Returns middlware that serves an index of the directory in the given <code>path</code>.</p>
<p>The <code>path</code> is based off the <code>req.url</code> value, so a <code>req.url</code> of <code>'/some/dir</code>
with a <code>path</code> of <code>'public'</code> will look at <code>'public/some/dir'</code>. If you are using
something like <code>express</code>, you can change the URL &quot;base&quot; with <code>app.use</code> (see
the express example).</p>
<h4>Options</h4>
<p>Serve index accepts these properties in the options object.</p>
<h5>filter</h5>
<p>Apply this filter function to files. Defaults to <code>false</code>. The <code>filter</code> function
is called for each file, with the signature <code>filter(filename, index, files, dir)</code>
where <code>filename</code> is the name of the file, <code>index</code> is the array index, <code>files</code> is
the array of files and <code>dir</code> is the absolute path the file is located (and thus,
the directory the listing is for).</p>
<h5>hidden</h5>
<p>Display hidden (dot) files. Defaults to <code>false</code>.</p>
<h5>icons</h5>
<p>Display icons. Defaults to <code>false</code>.</p>
<h5>stylesheet</h5>
<p>Optional path to a CSS stylesheet. Defaults to a built-in stylesheet.</p>
<h5>template</h5>
<p>Optional path to an HTML template or a function that will render a HTML
string. Defaults to a built-in template.</p>
<p>When given a string, the string is used as a file path to load and then the
following tokens are replaced in templates:</p>
<ul>
<li><code>{directory}</code> with the name of the directory.</li>
<li><code>{files}</code> with the HTML of an unordered list of file links.</li>
<li><code>{linked-path}</code> with the HTML of a link to the directory.</li>
<li><code>{style}</code> with the specified stylesheet and embedded images.</li>
</ul>
<p>When given as a function, the function is called as <code>template(locals, callback)</code>
and it needs to invoke <code>callback(error, htmlString)</code>. The following are the
provided locals:</p>
<ul>
<li><code>directory</code> is the directory being displayed (where <code>/</code> is the root).</li>
<li><code>displayIcons</code> is a Boolean for if icons should be rendered or not.</li>
<li><code>fileList</code> is a sorted array of files in the directory. The array contains
objects with the following properties:
<ul>
<li><code>name</code> is the relative name for the file.</li>
<li><code>stat</code> is a <code>fs.Stats</code> object for the file.</li>
</ul>
</li>
<li><code>path</code> is the full filesystem path to <code>directory</code>.</li>
<li><code>style</code> is the default stylesheet or the contents of the <code>stylesheet</code> option.</li>
<li><code>viewName</code> is the view name provided by the <code>view</code> option.</li>
</ul>
<h5>view</h5>
<p>Display mode. <code>tiles</code> and <code>details</code> are available. Defaults to <code>tiles</code>.</p>
<h2>Examples</h2>
<h3>Serve directory indexes with vanilla node.js http server</h3>
<pre><code class="language-js">var finalhandler = require('finalhandler')
var http = require('http')
var serveIndex = require('serve-index')
var serveStatic = require('serve-static')

// Serve directory indexes for public/ftp folder (with icons)
var index = serveIndex('public/ftp', {'icons': true})

// Serve up public/ftp folder files
var serve = serveStatic('public/ftp')

// Create server
var server = http.createServer(function onRequest(req, res){
  var done = finalhandler(req, res)
  serve(req, res, function onNext(err) {
    if (err) return done(err)
    index(req, res, done)
  })
})

// Listen
server.listen(3000)
</code></pre>
<h3>Serve directory indexes with express</h3>
<pre><code class="language-js">var express    = require('express')
var serveIndex = require('serve-index')

var app = express()

// Serve URLs like /ftp/thing as public/ftp/thing
// The express.static serves the file contents
// The serveIndex is this module serving the directory
app.use('/ftp', express.static('public/ftp'), serveIndex('public/ftp', {'icons': true}))

// Listen
app.listen(3000)
</code></pre>
<h2>License</h2>
<p><a href="LICENSE">MIT</a>. The <a href="http://www.famfamfam.com/lab/icons/silk/">Silk</a> icons
are created by/copyright of <a href="http://www.famfamfam.com/">FAMFAMFAM</a>.</p>
</div>
  </body>
</html>
