<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Book - 工作中遇到问题汇总</title>

  <link rel="stylesheet" href="/my-book/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/my-book/resource/style.css" />
  <link rel="stylesheet" href="/my-book/resource/lib/highlight/default.min.css" />
  <script src="/my-book/resource/lib/highlight/highlight.min.js"></script>
  <script src="/my-book/resource/lib/jquery.min.js"></script>
  <script src="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script src="//unpkg.com/jquery-viewer@1.0.1/dist/jquery-viewer.min.js"></script>
  <link rel="stylesheet" href="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.css" />

  <link rel="manifest" href="/my-book/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/my-book/resource/favicon.ico" />

  <!-- 编译时间：4/1/2022, 1:29:44 AM -->

  <script>
    window.root = '/my-book';
    hljs.highlightAll();
  </script>

  <script src="/my-book/resource/script.js"></script>
</head>

  <body>
    <div class="menu" id="menu"></div>
    <div class="mobile_menu" id="mobile_menu">
      <img src="https://cdn.jsdelivr.net/gh/FortAwesome/font-awesome/svgs/solid/bars.svg" alt="" />
    </div>
    <div class="content markdown-body"><h1>换行符不同导致大量冲突</h1>
<p>解决：使用 git 钩子在提交时统一风格</p>
<h1>配置 nginx 使用 location 前缀匹配，流量转发到了后面的规则</h1>
<p>解决：前缀匹配后，会继续更长前缀匹配和正则匹配。可换成使用 ~ 来匹配，这是区分大小写的正则匹配，按顺序匹配，一旦匹配即停止后续匹配。</p>
<h1>图片被盗链</h1>
<p>解决：nginx 添加白名单</p>
<h1>小程序适配 iphonex 机型底部安全区域</h1>
<p>解决：padding-bottom: constant(safe-area-inset-bottom);</p>
<h1>后端返回的 id 是 number 类型，数字太大超出了 JavaScript 的数字安全范围，出现了精度丢失，拿到响应结果时最后两位变成了 0</h1>
<p>解决：后端修改类型为 string</p>
<h1>小程序: hideLoading 能把 toast 也隐藏掉</h1>
<h1>下载跨域问题</h1>
<p>解决：BFF 层转发请求，转字节流（用 BFF 来请求这个文件，转成字节流给前端）</p>
<h1>css module 的局限性，无法准确预测类名</h1>
<pre><code class="language-less">// 例如这样的写法，使用了 css module 不会生效
.parent {
  color: red;
}

// 鼠标经过某个子节点想要修改父节点的样式
.children {
  &amp;:hover .parent {
    color: yellow;
  }
}
</code></pre>
<h1>敏捷迭代遇到的一些问题</h1>
<h2>bug 多，跟测时间长</h2>
<ul>
<li>自测不够充分</li>
<li>ui 验收时也会将 bug 加进来</li>
<li>评估存在不足，后面赶工时，质量受影响</li>
</ul>
<h1>开发毕业设计系统时，MySQL 数据库使用 utf8 编码格式 无法保存 emoji 表情</h1>
<ul>
<li>解决：改成 utf8mb4</li>
<li>是 MySQL 的一个历史遗留问题，utf8mb4 才是真正的 UTF-8</li>
<li>在 MySQL 中，“utf8”编码只支持每个字符最多三个字节，中文是占 3 个字节，其他数字、英文、符号占一个字节</li>
<li>而真正的 UTF-8 是每个字符最多四个字节，emoji 符号占 4 个字节，一些较复杂的文字、繁体字也是 4 个字节</li>
<li>MySQL 一直没有修复这个 bug，他们在 2010 年发布了一个叫作“utf8mb4”的字符集，巧妙的绕过了这个问题</li>
<li>他们并没有对新的字符集广而告之（可能是因为这个 bug 让他们觉得很尴尬），以致于现在网络上仍然在建议开发者使用“utf8”，但这些建议都是错误的</li>
</ul>
</div>
  </body>
</html>
