<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Book - 手写题</title>

  <link rel="stylesheet" href="/my-book/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/my-book/resource/style.css" />
  <link rel="stylesheet" href="/my-book/resource/lib/highlight/default.min.css" />
  <script src="/my-book/resource/lib/highlight/highlight.min.js"></script>
  <script src="/my-book/resource/lib/jquery.min.js"></script>
  <script src="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script src="//unpkg.com/jquery-viewer@1.0.1/dist/jquery-viewer.min.js"></script>
  <link rel="stylesheet" href="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.css" />

  <link rel="manifest" href="/my-book/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/my-book/resource/favicon.ico" />

  <!-- 编译时间：3/27/2022, 3:51:00 PM -->

  <script>
    window.root = '/my-book';
    hljs.highlightAll();
  </script>

  <script src="/my-book/resource/script.js"></script>
</head>

  <body>
    <div class="menu" id="menu"></div>
    <div class="mobile_menu" id="mobile_menu">
      <img src="https://cdn.jsdelivr.net/gh/FortAwesome/font-awesome/svgs/solid/bars.svg" alt="" />
    </div>
    <div class="content markdown-body"><h1>手写题</h1>
<h1>防抖节流</h1>
<ul>
<li>防抖：n 秒内只执行一次，如果 n 秒内再次触发，则重新计算时间（多用于输入框）</li>
<li>节流：n 秒内只会执行一次，稀释执行频率</li>
</ul>
<p>手写：</p>
<pre><code class="language-jsx">const tools = {
  debounce: (fn, wait = 500) =&gt; {
    let timer = null;
    return function () {
      if (timer) {
        clearTimeout(timer);
      }
      timer = setTimeout(() =&gt; {
        fn.apply(this, arguments);
      }, wait);
    };
  },
  throttle: (fn, wait = 500) =&gt; {
    let canrun = true;
    return function () {
      if (!canrun) {
        return;
      }
      canrun = false;
      setTimeout(() =&gt; {
        fn.apply(this, arguments);
        canrun = true;
      }, wait);
    };
  },
};
</code></pre>
<h1>手写工厂模式</h1>
<pre><code class="language-jsx">class SuperAdmin {
  constructor() {
    this.name = '超级管理员';
    this.viewPage = ['首页', '通讯录', '发现页', '应用数据', '权限管理'];
  }
}
class Admin {
  constructor() {
    this.name = '管理员';
    this.viewPage = ['首页', '通讯录', '发现页', '应用数据', '权限管理'];
  }
}
class NormalUser {
  constructor() {
    this.name = '普通用户';
    this.viewPage = ['首页', '通讯录', '发现页', '应用数据', '权限管理'];
  }
}
class UserFactory {
  getFactory(role) {
    switch (role) {
      case 'superAdmin':
        return new SuperAdmin();
        break;
      case 'admin':
        return new Admin();
        break;
      case 'user':
        return new NormalUser();
        break;
      default:
        throw new Error('参数错误, 可选参数:superAdmin、admin、user');
    }
  }
}
let uesr = new UserFactory();
uesr.getFactory('superAdmin');
uesr.getFactory('admin');
uesr.getFactory('user');
</code></pre>
<h1>手写数组去重</h1>
<pre><code class="language-jsx">// 方法1
const uniqBy = (arr, key) =&gt; {
  return [...new Map(arr.map((item) =&gt; [item[key], item])).values()];
};
const singers = [
  { id: 1, name: 'Leslie Cheung' },
  { id: 1, name: 'Leslie Cheung' },
  { id: 2, name: 'Eason Chan' },
];
console.log(uniqBy(singers, 'id'));

// 方法2
function unique(arr) {
  return Array.from(new Set(arr));
}
</code></pre>
<h1>手写数组扁平化</h1>
<pre><code class="language-jsx">const str = [0, 1, [2, [3, 4]]].toString();
// '0, 1, 2, 3, 4'
const arr = str.split(',');
// ['0','1','2', '3', '4']
const newArr = arr.map((item) =&gt; +item);
// [0, 1, 2, 3, 4]
const flatten = (arr) =&gt;
  arr
    .toString()
    .split(',')
    .map((item) =&gt; +item);
</code></pre>
<h1>手写发布订阅 EventEmitter</h1>
<pre><code class="language-jsx">class EventEmitter {
  constructor() {
    this.events = {};
  }
  on(name, cb) {
    if (!this.events[name]) {
      this.events[name] = [cb];
    } else {
      this.events[name].push(cb);
    }
  }
  emit(name, ...arg) {
    if (this.events[name]) {
      this.events[name].forEach((fn) =&gt; {
        fn.call(this, ...arg);
      });
    }
  }
  off(name, cb) {
    if (this.events[name]) {
      this.events[name].filter((fn) =&gt; {
        return fn != cb;
      });
    }
  }
  once(name, fn) {
    let onlyOnce = () =&gt; {
      fn.apply(this, arguments);
      this.off(name, onlyOnce);
    };
    this.on(name, onlyOnce);
    return this;
  }
}
</code></pre>
<h1>手写获取 url 参数</h1>
<pre><code class="language-jsx">function getQuery() {
  let result = {};
  let search = decodeURI(window.location.search);
  if (!search) {
    return result;
  }
  search
    .slice(1)
    .split('&amp;')
    .forEach((item, i) =&gt; {
      let k = item.split('=')[0];
      let v = item.split('=')[1];
      result[k] = v;
    });
  return result;
}
</code></pre>
<h1>手写数组乱序</h1>
<pre><code class="language-jsx">function mixArr(arr) {
  return arr.sort(() =&gt; {
    return Math.random() - 0.5;
  });
}
</code></pre>
<h1>判断括号字符串是否有效</h1>
<pre><code class="language-jsx">function is_leagl_brackets(string) {
  var array = [];
  for (var i = 0; i &lt; string.length; i++) {
    var item = string[i];
    if (item === '(') {
      array.push('(');
    } else if (item === ')') {
      if (array.length === 0) {
        return false;
      } else {
        array.pop();
      }
    } else {
      continue;
    }
  }
  return array.length === 0;
}
console.log('(asd):', is_leagl_brackets('(asd)'));
console.log('asd(asd(adsfsdf(asdf())))):', is_leagl_brackets('asd(asd(adsfsdf(asdf()))))'));
</code></pre>
<h1>求斐波那契数列第 N 项</h1>
<pre><code class="language-javascript">// 求斐波那契数列（Fibonacci）中的第n项 1 1 2 3 5 8 13 21 ...
// 在控制台输出 斐波那契竖列的前12项

function getFib(n) {
  if (n === 1 || n === 2) {
    return 1;
  }
  var n1 = 1;
  var n2 = 1;
  var fib;
  for (var i = 3; i &lt;= n; i++) {
    fib = n1 + n2;
    n1 = n2;
    n2 = fib;
  }
  return fib;
}

// console.log(getFib(12)); // 144

for (var i = 1; i &lt;= 12; i++) {
  console.log(getFib(i));
}
</code></pre>
</div>
  </body>
</html>
