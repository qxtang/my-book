# 虚拟列表

## 是什么

- 不能分页的情况下渲染多条（上万级别）数据
- 只对可见区域进行渲染，对非可见区域中的数据不渲染或部分渲染的技术，从而达到极高的渲染性能

## 实现描述

- 首屏加载时，只加载可视区域内需要的列表项
- 滚动发生时，计算出可视区域内的列表项，并将非可视区域内存在的列表项销毁

## 问题

### 列表项动态高度问题

- 列表项包含文字或图片，图片加载完成是异步的，无法预判高度
- 对组件属性 itemSize 进行扩展，支持传递类型为数字、数组、函数
- 将列表项渲染到屏幕外，对其高度进行测量并缓存，然后再将其渲染至可视区域内
- 以预估高度先行渲染，然后获取真实高度并缓存
- 使用新 api：ResizeObserver 监听图片尺寸变化，但需要考虑浏览器兼容性

### scroll 事件频繁触发问题

- IntersectionObserver
