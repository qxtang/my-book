<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Book - 虚拟列表</title>

  <link rel="stylesheet" href="/my-book/resource/lib/github-markdown.min.css" />
  <link rel="stylesheet" href="/my-book/resource/style.css" />
  <link rel="stylesheet" href="/my-book/resource/lib/highlight/default.min.css" />
  <script src="/my-book/resource/lib/highlight/highlight.min.js"></script>
  <script src="/my-book/resource/lib/jquery.min.js"></script>
  <script src="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.js"></script>
  <script src="//unpkg.com/jquery-viewer@1.0.1/dist/jquery-viewer.min.js"></script>
  <link rel="stylesheet" href="//unpkg.com/viewerjs@1.10.4/dist/viewer.min.css" />

  <link rel="manifest" href="/my-book/manifest.json" />
  <link rel="shortcut icon" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="bookmark" type="image/x-icon" href="/my-book/resource/favicon.ico" />
  <link rel="apple-touch-icon" href="/my-book/resource/favicon.ico" />

  <!-- 编译时间：3/28/2022, 1:35:58 AM -->

  <script>
    window.root = '/my-book';
    hljs.highlightAll();
  </script>

  <script src="/my-book/resource/script.js"></script>
</head>

  <body>
    <div class="content markdown-body"><h1>虚拟列表</h1>
<h2>是什么</h2>
<ul>
<li>只对可见区域进行渲染，对非可见区域中的数据不渲染或部分渲染的技术，从而达到极高的渲染性能</li>
</ul>
<h2>作用</h2>
<ul>
<li>不能分页的情况下渲染多条（上万级别）数据</li>
</ul>
<h2>实现描述</h2>
<ul>
<li>首屏加载时，只加载可视区域内需要的列表项</li>
<li>滚动发生时，计算出可视区域内的列表项，并将非可视区域内存在的列表项销毁</li>
</ul>
<h2>问题</h2>
<h3>列表项动态高度问题</h3>
<ul>
<li>对组件属性 itemSize 进行扩展，支持传递类型为数字、数组、函数</li>
<li>将列表项渲染到屏幕外，对其高度进行测量并缓存，然后再将其渲染至可视区域内</li>
<li>以预估高度先行渲染，然后获取真实高度并缓存</li>
</ul>
<h3>scroll 事件频繁触发问题</h3>
<ul>
<li>IntersectionObserver</li>
</ul>
<h3>列表项包含图片，图片加载完成是异步的，无法预判高度</h3>
<ul>
<li>ResizeObserver（但有兼容性问题）</li>
</ul>
</div>
  </body>
</html>
